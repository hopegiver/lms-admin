<div class="menus-page">
    <!-- 페이지 헤더 -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">메뉴</h4>
            <p class="text-muted mb-0">사이트 네비게이션 메뉴를 관리합니다</p>
        </div>
        <button class="btn btn-primary" @click="openCreateMenuModal">
            <span class="me-1">+</span> 메뉴 생성
        </button>
    </div>

    <div class="row">
        <!-- 메뉴 목록 -->
        <div class="col-md-4">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white py-3">
                    <h6 class="mb-0">메뉴 목록</h6>
                </div>
                <div class="list-group list-group-flush">
                    <a v-for="menu in menus" :key="menu.id"
                       href="#"
                       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                       :class="{ 'active': selectedMenu && selectedMenu.id === menu.id }"
                       @click.prevent="selectMenu(menu)">
                        <div>
                            <div class="fw-medium" @click.stop="viewDetail(menu)" style="cursor: pointer;">{{ menu.name }}</div>
                            <div class="text-muted small">{{ menu.location }}</div>
                        </div>
                        <span class="badge bg-light text-dark">{{ menu.itemsCount }}개</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- 메뉴 항목 편집 -->
        <div class="col-md-8">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                    <h6 class="mb-0">{{ selectedMenu ? selectedMenu.name : '메뉴를 선택하세요' }}</h6>
                    <div v-if="selectedMenu">
                        <button class="btn btn-sm btn-outline-primary me-2" @click="addMenuItem">
                            <span class="me-1">+</span> 항목 추가
                        </button>
                        <button class="btn btn-sm btn-primary" @click="saveMenu">저장</button>
                    </div>
                </div>
                <div class="card-body" v-if="selectedMenu">
                    <div class="menu-items">
                        <div v-for="(item, index) in selectedMenu.items" :key="item.id"
                             class="border rounded p-3 mb-2 bg-light d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center gap-3">
                                <span class="text-muted" style="cursor: move;">☰</span>
                                <div>
                                    <div class="fw-medium">{{ item.label }}</div>
                                    <div class="text-muted small">{{ item.url }}</div>
                                </div>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-outline-secondary" @click="editMenuItem(item)">수정</button>
                                <button class="btn btn-sm btn-outline-danger" @click="removeMenuItem(index)">삭제</button>
                            </div>
                        </div>
                        <div v-if="selectedMenu.items.length === 0" class="text-center text-muted py-5">
                            메뉴 항목이 없습니다. 항목을 추가해주세요.
                        </div>
                    </div>
                </div>
                <div class="card-body text-center text-muted py-5" v-else>
                    왼쪽에서 편집할 메뉴를 선택하세요
                </div>
            </div>
        </div>
    </div>
</div>
