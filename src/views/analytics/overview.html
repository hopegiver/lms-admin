<div class="analytics-overview">
    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">í†µí•© ëŒ€ì‹œë³´ë“œ</h4>
            <p class="text-muted mb-0">ì „ì²´ í•µì‹¬ ì§€í‘œë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-sm" :class="dateRange === 'today' ? 'btn-primary' : 'btn-outline-secondary'" @click="changeDateRange('today')">ì˜¤ëŠ˜</button>
            <button type="button" class="btn btn-sm" :class="dateRange === '7days' ? 'btn-primary' : 'btn-outline-secondary'" @click="changeDateRange('7days')">7ì¼</button>
            <button type="button" class="btn btn-sm" :class="dateRange === '30days' ? 'btn-primary' : 'btn-outline-secondary'" @click="changeDateRange('30days')">30ì¼</button>
            <button type="button" class="btn btn-sm" :class="dateRange === '90days' ? 'btn-primary' : 'btn-outline-secondary'" @click="changeDateRange('90days')">90ì¼</button>
        </div>
    </div>

    <!-- ì‹¤ì‹œê°„ ì ‘ì†ì ì•Œë¦¼ -->
    <div class="alert alert-info d-flex align-items-center mb-4">
        <span class="me-2 fs-4">âš¡</span>
        <div>
            <strong>ì‹¤ì‹œê°„ ì ‘ì†ì: {{ liveUsers }}ëª…</strong>
            <span class="ms-2 text-muted">í˜„ì¬ í•™ìŠµ ì¤‘ì¸ ì‚¬ìš©ìê°€ í™œë™í•˜ê³  ìˆìŠµë‹ˆë‹¤</span>
        </div>
    </div>

    <!-- í•µì‹¬ ì§€í‘œ ì¹´ë“œ -->
    <div class="row g-3 mb-4">
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div class="text-muted small">ì´ ë§¤ì¶œ</div>
                        <div class="rounded-circle bg-success bg-opacity-10 p-2">
                            <span class="fs-5">ğŸ’°</span>
                        </div>
                    </div>
                    <div class="fs-3 fw-bold mb-1">{{ keyMetrics.totalRevenue }}</div>
                    <div class="small">
                        <span class="text-success">â–² {{ keyMetrics.revenueChange }}%</span>
                        <span class="text-muted ms-1">ì „ì›” ëŒ€ë¹„</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div class="text-muted small">ì „ì²´ ì‚¬ìš©ì</div>
                        <div class="rounded-circle bg-primary bg-opacity-10 p-2">
                            <span class="fs-5">ğŸ‘¥</span>
                        </div>
                    </div>
                    <div class="fs-3 fw-bold mb-1">{{ keyMetrics.totalUsers }}</div>
                    <div class="small">
                        <span class="text-success">â–² {{ keyMetrics.usersChange }}%</span>
                        <span class="text-muted ms-1">ì „ì›” ëŒ€ë¹„</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div class="text-muted small">ìš´ì˜ ê°•ì¢Œ</div>
                        <div class="rounded-circle bg-warning bg-opacity-10 p-2">
                            <span class="fs-5">ğŸ“š</span>
                        </div>
                    </div>
                    <div class="fs-3 fw-bold mb-1">{{ keyMetrics.activeCourses }}</div>
                    <div class="small">
                        <span class="text-success">â–² {{ keyMetrics.coursesChange }}%</span>
                        <span class="text-muted ms-1">ì „ì›” ëŒ€ë¹„</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div class="text-muted small">í‰ê·  ì™„ê°•ë¥ </div>
                        <div class="rounded-circle bg-info bg-opacity-10 p-2">
                            <span class="fs-5">ğŸ“ˆ</span>
                        </div>
                    </div>
                    <div class="fs-3 fw-bold mb-1">{{ keyMetrics.completionRate }}</div>
                    <div class="small">
                        <span class="text-success">â–² {{ keyMetrics.completionChange }}%</span>
                        <span class="text-muted ms-1">ì „ì›” ëŒ€ë¹„</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì°¨íŠ¸ ì˜ì—­ -->
    <div class="row g-4 mb-4">
        <!-- ë§¤ì¶œ ì¶”ì´ -->
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <h6 class="card-title mb-4">ë§¤ì¶œ ì¶”ì´</h6>
                    <div class="chart-container" style="height: 300px;">
                        <div class="d-flex align-items-end justify-content-between h-100" style="gap: 8px;">
                            <div v-for="data in revenueChartData" :key="data.date" class="flex-fill text-center">
                                <div class="mb-2">
                                    <div class="bg-primary rounded" :style="{ height: getChartBarHeight(data.amount), minHeight: '10px' }"></div>
                                </div>
                                <div class="small text-muted">{{ data.date }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì˜¤ëŠ˜ì˜ ìš”ì•½ -->
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body">
                    <h6 class="card-title mb-4">ì˜¤ëŠ˜ì˜ ìš”ì•½</h6>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted">ì‹ ê·œ ê°€ì…</span>
                            <span class="fw-bold">{{ todaySummary.newUsers }}ëª…</span>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-primary" style="width: 75%"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted">ì‹ ê·œ ìˆ˜ê°•</span>
                            <span class="fw-bold">{{ todaySummary.newEnrollments }}ê±´</span>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-success" style="width: 85%"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted">ê°•ì¢Œ ì™„ë£Œ</span>
                            <span class="fw-bold">{{ todaySummary.completedCourses }}ê±´</span>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-info" style="width: 60%"></div>
                        </div>
                    </div>
                    <div class="mb-0">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-muted">ë§¤ì¶œ</span>
                            <span class="fw-bold">{{ todaySummary.revenue }}</span>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-warning" style="width: 90%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì¸ê¸° ê°•ì¢Œ & ìµœê·¼ í™œë™ -->
    <div class="row g-4">
        <!-- ì¸ê¸° ê°•ì¢Œ TOP 5 -->
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="card-title mb-4">ì¸ê¸° ê°•ì¢Œ TOP 5</h6>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>ìˆœìœ„</th>
                                    <th>ê°•ì¢Œëª…</th>
                                    <th class="text-end">ìˆ˜ê°•ìƒ</th>
                                    <th class="text-end">ë§¤ì¶œ</th>
                                    <th class="text-center">í‰ì </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(course, index) in topCourses" :key="course.id">
                                    <td>
                                        <span class="badge" :class="{
                                            'bg-warning': index === 0,
                                            'bg-secondary': index === 1,
                                            'bg-info': index === 2,
                                            'bg-light text-dark': index > 2
                                        }">{{ index + 1 }}</span>
                                    </td>
                                    <td class="fw-bold">{{ course.title }}</td>
                                    <td class="text-end">{{ formatNumber(course.enrollments) }}</td>
                                    <td class="text-end">{{ course.revenue }}</td>
                                    <td class="text-center">
                                        <span class="badge bg-warning">â­ {{ course.rating }}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìµœê·¼ í™œë™ -->
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="card-title mb-4">ìµœê·¼ í™œë™</h6>
                    <div style="max-height: 400px; overflow-y: auto;">
                        <div v-for="activity in recentActivities" :key="activity.id" class="d-flex align-items-start mb-3 pb-3 border-bottom">
                            <div class="me-3">
                                <span class="badge" :class="'bg-' + getActivityColor(activity.type)">
                                    {{ getActivityIcon(activity.type) }}
                                </span>
                            </div>
                            <div class="flex-fill">
                                <div class="fw-bold">{{ activity.user }}</div>
                                <div class="small text-muted">
                                    <span v-if="activity.course">{{ activity.course }}</span>
                                    <span v-if="activity.amount">{{ activity.amount }}</span>
                                    <span v-if="activity.subject">{{ activity.subject }}</span>
                                    <span v-if="activity.rating"> - â­ {{ activity.rating }}ì </span>
                                </div>
                            </div>
                            <div class="text-muted small">{{ activity.time }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
