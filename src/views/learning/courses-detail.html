<div class="courses-detail-page">
    <!-- 페이지 헤더 -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <div class="d-flex align-items-center gap-2 mb-2">
                <a href="#" @click.prevent="navigateTo('/learning/courses')" class="text-muted">
                    ← 강좌 목록
                </a>
            </div>
            <h4 class="mb-1">{{ course?.title }}</h4>
            <p class="text-muted mb-0">강좌 상세 정보</p>
        </div>
        <div class="d-flex gap-2">
            <button class="btn btn-outline-primary" @click="preview">
                👁️ 미리보기
            </button>
            <button class="btn btn-outline-secondary" @click="edit">
                ✏️ 수정
            </button>
            <button class="btn btn-outline-danger" @click="deleteCourse">
                🗑️ 삭제
            </button>
        </div>
    </div>

    <!-- 탭 메뉴 -->
    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'info' }" href="#" @click.prevent="currentTab = 'info'">기본정보</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'curriculum' }" href="#" @click.prevent="currentTab = 'curriculum'">커리큘럼</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'completion' }" href="#" @click.prevent="currentTab = 'completion'">수료 설정</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'students' }" href="#" @click.prevent="currentTab = 'students'">수강생</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'reviews' }" href="#" @click.prevent="currentTab = 'reviews'">리뷰</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'stats' }" href="#" @click.prevent="currentTab = 'stats'">통계</a>
        </li>
    </ul>

    <!-- 기본정보 탭 -->
    <div v-if="currentTab === 'info' && course">
        <div class="row">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0">강좌 정보</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-12" v-if="course.thumbnail">
                                <img :src="course.thumbnail" class="img-fluid rounded" style="max-height: 300px;">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">강좌명</label>
                                <div class="fw-medium">{{ course.title }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">카테고리</label>
                                <div class="fw-medium">{{ course.category }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">강사</label>
                                <div class="fw-medium">{{ course.instructor }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">난이도</label>
                                <div class="fw-medium">{{ getLevelText(course.level) }}</div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small">총 차시</label>
                                <div class="fw-medium">{{ course.lessons }}개</div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small">총 시간</label>
                                <div class="fw-medium">{{ course.duration }}</div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label text-muted small">상태</label>
                                <div>
                                    <span class="badge" :class="getStatusClass(course.status)">
                                        {{ getStatusText(course.status) }}
                                    </span>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label text-muted small">설명</label>
                                <div class="fw-medium">{{ course.description }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 통계 사이드바 -->
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm mb-3">
                    <div class="card-body">
                        <h6 class="mb-3">강좌 통계</h6>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="small text-muted">총 수강생</span>
                                <span class="fw-bold fs-5">{{ course.students }}명</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span class="small text-muted">평균 평점</span>
                                <span class="fw-bold fs-5">
                                    <span class="text-warning">★</span> {{ course.rating }}
                                </span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span class="small text-muted">리뷰 수</span>
                                <span class="fw-bold">{{ course.reviewCount }}개</span>
                            </div>
                        </div>
                        <hr>
                        <div>
                            <div class="d-flex justify-content-between">
                                <span class="small text-muted">평균 진도율</span>
                                <span class="fw-bold">68%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 커리큘럼 탭 -->
    <div v-if="currentTab === 'curriculum'">
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
                <h5 class="mb-0">커리큘럼 관리</h5>
                <button class="btn btn-sm btn-primary" @click="showAddSectionForm">
                    ➕ 섹션 추가
                </button>
            </div>
            <div class="card-body">
                <!-- 섹션 추가/수정 폼 -->
                <div v-if="sectionFormVisible" class="card bg-light border mb-3">
                    <div class="card-body">
                        <h6 class="mb-3">{{ sectionFormMode === 'add' ? '새 섹션 추가' : '섹션 수정' }}</h6>
                        <div class="row g-3">
                            <div class="col-md-12">
                                <label class="form-label">섹션명 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" v-model="sectionForm.title" placeholder="예) React 기초">
                            </div>
                            <div class="col-12">
                                <label class="form-label">설명</label>
                                <textarea class="form-control" rows="2" v-model="sectionForm.description" placeholder="섹션에 대한 간단한 설명"></textarea>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end gap-2 mt-3">
                            <button class="btn btn-outline-secondary btn-sm" @click="cancelSectionForm">취소</button>
                            <button class="btn btn-primary btn-sm" @click="saveSectionForm">
                                {{ sectionFormMode === 'add' ? '추가' : '수정' }}
                            </button>
                        </div>
                    </div>
                </div>


                <!-- 섹션 목록 -->
                <div v-if="sections.length === 0" class="text-center text-muted py-5">
                    <div class="mb-3" style="font-size: 3rem;">📚</div>
                    <p class="mb-0">아직 등록된 섹션이 없습니다.</p>
                    <p class="small">섹션을 추가하여 커리큘럼을 구성해보세요.</p>
                </div>

                <div v-else class="accordion" id="curriculumAccordion">
                    <div class="accordion-item mb-3 border rounded" v-for="(section, sectionIndex) in sections" :key="section.id">
                        <h2 class="accordion-header">
                            <div class="d-flex align-items-center">
                                <div class="d-flex flex-column me-2">
                                    <button class="btn btn-sm btn-outline-secondary py-0 px-2 mb-1"
                                            @click="moveSectionUp(sectionIndex)"
                                            :disabled="sectionIndex === 0"
                                            style="font-size: 0.7rem; line-height: 1;">
                                        ▲
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary py-0 px-2"
                                            @click="moveSectionDown(sectionIndex)"
                                            :disabled="sectionIndex === sections.length - 1"
                                            style="font-size: 0.7rem; line-height: 1;">
                                        ▼
                                    </button>
                                </div>
                                <button class="accordion-button collapsed flex-grow-1" type="button"
                                        data-bs-toggle="collapse"
                                        :data-bs-target="'#collapse' + section.id">
                                    <div class="d-flex justify-content-between align-items-center w-100 me-3">
                                        <div>
                                            <span class="fw-bold">{{ section.title }}</span>
                                            <span class="text-muted small ms-2" v-if="section.description">{{ section.description }}</span>
                                        </div>
                                        <div class="d-flex gap-2 align-items-center">
                                            <span class="badge bg-primary">{{ section.lessons ? section.lessons.length : 0 }}개 차시</span>
                                            <span class="badge bg-secondary">{{ getSectionDuration(section) }}</span>
                                        </div>
                                    </div>
                                </button>
                                <div class="dropdown ms-2 me-2">
                                    <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="dropdown">
                                        ⋮
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="#" @click.prevent="showAddLessonForm(section.id)">➕ 차시 추가</a></li>
                                        <li><a class="dropdown-item" href="#" @click.prevent="editSection(section)">✏️ 섹션 수정</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item text-danger" href="#" @click.prevent="deleteSection(section)">🗑️ 섹션 삭제</a></li>
                                    </ul>
                                </div>
                            </div>
                        </h2>
                        <div :id="'collapse' + section.id" class="accordion-collapse collapse"
                             data-bs-parent="#curriculumAccordion">
                            <div class="accordion-body">
                                <!-- 섹션 내 차시 목록 -->
                                <div v-if="!section.lessons || section.lessons.length === 0" class="text-center text-muted py-4">
                                    <p class="mb-2">이 섹션에 등록된 차시가 없습니다.</p>
                                    <button class="btn btn-sm btn-outline-primary" @click="showAddLessonForm(section.id)">
                                        ➕ 첫 차시 추가
                                    </button>
                                </div>
                                <div v-else class="list-group">
                                    <div class="list-group-item" v-for="(lesson, lessonIndex) in section.lessons" :key="lesson.id">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                                                <div class="d-flex flex-column gap-1">
                                                    <button class="btn btn-sm btn-outline-secondary py-0 px-2"
                                                            @click="moveLessonUp(section.id, lessonIndex)"
                                                            :disabled="lessonIndex === 0"
                                                            style="font-size: 0.7rem; line-height: 1;">
                                                        ▲
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary py-0 px-2"
                                                            @click="moveLessonDown(section.id, lessonIndex)"
                                                            :disabled="lessonIndex === section.lessons.length - 1"
                                                            style="font-size: 0.7rem; line-height: 1;">
                                                        ▼
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="d-flex align-items-start mb-2">
                                                    <span class="badge bg-primary me-2">{{ lessonIndex + 1 }}</span>
                                                    <div class="flex-grow-1">
                                                        <div class="d-flex align-items-center gap-2 mb-1">
                                                            <span class="fw-medium">{{ lesson.title }}</span>
                                                            <span class="badge bg-light text-dark">{{ lesson.type || '동영상' }}</span>
                                                            <span v-if="lesson.isFree" class="badge bg-success">무료</span>
                                                            <span v-if="!lesson.isPublic" class="badge bg-warning text-dark">비공개</span>
                                                        </div>
                                                        <div class="small text-muted">
                                                            <span>⏱️ {{ lesson.duration }}</span>
                                                            <span v-if="lesson.description" class="ms-3">{{ lesson.description }}</span>
                                                        </div>
                                                        <div v-if="lesson.contentId && lesson.contentType" class="small text-success mt-1">
                                                            <span>{{ getContentTypeIcon(lesson.contentType) }} {{ getLinkedContentName(lesson) }}</span>
                                                        </div>
                                                        <div v-else-if="lesson.contentUrl" class="small text-muted mt-1">
                                                            <span>🔗 {{ lesson.contentUrl }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-auto">
                                                <div class="btn-group">
                                                    <button class="btn btn-sm btn-outline-primary" @click="previewLesson(lesson)">
                                                        👁️
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary" @click="editLesson(section.id, lesson)">
                                                        ✏️
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" @click="deleteLesson(section.id, lesson)">
                                                        🗑️
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 커리큘럼 통계 -->
                <div v-if="sections.length > 0" class="mt-4 p-3 bg-light rounded">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <div class="small text-muted">총 섹션</div>
                            <div class="fw-bold fs-5">{{ sections.length }}개</div>
                        </div>
                        <div class="col-md-3">
                            <div class="small text-muted">총 차시</div>
                            <div class="fw-bold fs-5">{{ getTotalLessonsCount() }}개</div>
                        </div>
                        <div class="col-md-3">
                            <div class="small text-muted">총 시간</div>
                            <div class="fw-bold fs-5">{{ getTotalDuration() }}</div>
                        </div>
                        <div class="col-md-3">
                            <div class="small text-muted">무료 미리보기</div>
                            <div class="fw-bold fs-5">{{ getFreeLessonsCount() }}개</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 수료 설정 탭 -->
    <div v-if="currentTab === 'completion'">
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0">🎓 수료증 템플릿 선택</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-8">
                        <label class="form-label">수료증 템플릿 *</label>
                        <select class="form-select" v-model="completionSettings.certificateTemplateId">
                            <option :value="null">템플릿을 선택하세요</option>
                            <option v-for="template in certificateTemplates" :key="template.id" :value="template.id">
                                {{ template.name }} ({{ template.orientation === 'horizontal' ? '가로형' : '세로형' }})
                            </option>
                        </select>
                        <div class="form-text">수료 시 발급될 수료증 템플릿을 선택합니다.</div>
                    </div>
                    <div class="col-md-4 d-flex align-items-end">
                        <button class="btn btn-outline-primary w-100" @click="navigateTo('/settings/certificates')">
                            <span class="me-1">⚙️</span> 템플릿 관리
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">📋 수료 기준 설정</h5>
                <button class="btn btn-sm btn-outline-info" @click="showScoreCalculationInfo">
                    <span class="me-1">ℹ️</span> 총점 계산 방식
                </button>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">진도율 기준 (%)</label>
                        <div class="input-group">
                            <input type="number" class="form-control" v-model.number="completionSettings.progressRequired" min="0" max="100">
                            <span class="input-group-text">%</span>
                        </div>
                        <div class="form-text">수료에 필요한 최소 진도율 (0~100)</div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">총점 기준 (점)</label>
                        <div class="input-group">
                            <input type="number" class="form-control" v-model.number="completionSettings.scoreRequired" min="0" max="100">
                            <span class="input-group-text">점</span>
                        </div>
                        <div class="form-text">수료에 필요한 최소 총점 (0~100)</div>
                    </div>
                    <div class="col-12">
                        <hr>
                        <h6 class="mb-3">추가 수료 요건</h6>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="requireAllLessons" v-model="completionSettings.requireAllLessons">
                            <label class="form-check-label" for="requireAllLessons">
                                모든 차시 수강 필수
                            </label>
                        </div>
                        <div class="form-text small">모든 차시를 100% 수강해야 수료 가능</div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="requireExams" v-model="completionSettings.requireExams">
                            <label class="form-check-label" for="requireExams">
                                시험 통과 필수
                            </label>
                        </div>
                        <div class="form-text small">연동된 모든 시험을 통과해야 수료 가능</div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="requireAssignments" v-model="completionSettings.requireAssignments">
                            <label class="form-check-label" for="requireAssignments">
                                과제 제출 필수
                            </label>
                        </div>
                        <div class="form-text small">연동된 모든 과제를 제출해야 수료 가능</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">⚙️ 수료 처리 방식</h5>
                <button class="btn btn-sm btn-outline-info" @click="showCompletionProcessInfo">
                    <span class="me-1">ℹ️</span> 처리 방식 설명
                </button>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label class="form-label">수료 처리 방식</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" id="completionTypeAuto" value="auto" v-model="completionSettings.completionType">
                            <label class="form-check-label" for="completionTypeAuto">
                                <strong>자동 수료</strong>
                                <div class="text-muted small">수료 기준을 충족하면 자동으로 수료 처리됩니다.</div>
                            </label>
                        </div>
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="radio" id="completionTypeManual" value="manual" v-model="completionSettings.completionType">
                            <label class="form-check-label" for="completionTypeManual">
                                <strong>수동 수료</strong>
                                <div class="text-muted small">관리자가 수강 관리에서 수동으로 수료 처리합니다.</div>
                            </label>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="alert alert-info mb-0">
                            <strong>📌 수료번호 자동 생성</strong><br>
                            수료 처리 시 수료번호가 자동으로 생성됩니다. (형식: CERT-YYYY-XXXXXX)<br>
                            예시: CERT-2024-000001, CERT-2024-000002, ...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 현재 설정 요약 -->
        <div class="card border-0 shadow-sm bg-light mb-4">
            <div class="card-body">
                <h6 class="mb-3">📊 현재 수료 기준 요약</h6>
                <div class="row g-2">
                    <div class="col-md-3">
                        <div class="small text-muted">진도율</div>
                        <div class="fw-bold">{{ completionSettings.progressRequired }}% 이상</div>
                    </div>
                    <div class="col-md-3">
                        <div class="small text-muted">총점</div>
                        <div class="fw-bold">{{ completionSettings.scoreRequired }}점 이상</div>
                    </div>
                    <div class="col-md-3">
                        <div class="small text-muted">추가 요건</div>
                        <div class="fw-bold">
                            <span v-if="completionSettings.requireAllLessons">✓ 전체 수강 </span>
                            <span v-if="completionSettings.requireExams">✓ 시험 </span>
                            <span v-if="completionSettings.requireAssignments">✓ 과제 </span>
                            <span v-if="!completionSettings.requireAllLessons && !completionSettings.requireExams && !completionSettings.requireAssignments">없음</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="small text-muted">처리 방식</div>
                        <div class="fw-bold">{{ completionSettings.completionType === 'auto' ? '자동 수료' : '수동 수료' }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-end">
            <button class="btn btn-primary" @click="saveCompletionSettings">
                <span class="me-1">💾</span> 수료 설정 저장
            </button>
        </div>
    </div>

    <!-- 수강생 탭 -->
    <div v-if="currentTab === 'students'">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>이름</th>
                                <th>이메일</th>
                                <th class="text-center">진도율</th>
                                <th>등록일</th>
                                <th class="text-center">상태</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="student in students" :key="student.id">
                                <td>{{ student.name }}</td>
                                <td>{{ student.email }}</td>
                                <td class="text-center">
                                    <div class="progress" style="height: 8px; width: 100px; margin: 0 auto;">
                                        <div class="progress-bar" :style="{ width: student.progress + '%' }"></div>
                                    </div>
                                    <small class="text-muted">{{ student.progress }}%</small>
                                </td>
                                <td>{{ student.enrolledAt }}</td>
                                <td class="text-center">
                                    <span class="badge" :class="student.progress === 100 ? 'bg-success' : 'bg-primary'">
                                        {{ student.progress === 100 ? '완료' : '진행중' }}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 리뷰 탭 -->
    <div v-if="currentTab === 'reviews'">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="list-group list-group-flush">
                    <div class="list-group-item px-0" v-for="review in reviews" :key="review.id">
                        <div class="d-flex justify-content-between mb-2">
                            <div>
                                <span class="fw-medium">{{ review.author }}</span>
                                <span class="ms-2 text-warning">{{ '★'.repeat(review.rating) }}</span>
                            </div>
                            <small class="text-muted">{{ review.date }}</small>
                        </div>
                        <p class="mb-0 text-muted">{{ review.content }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 통계 탭 -->
    <div v-if="currentTab === 'stats'">
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0">수강생 증가 추이</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">차트 영역 (추후 구현)</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0">진도율 분포</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">차트 영역 (추후 구현)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 차시 추가/수정 모달 -->
    <div class="modal fade" id="lessonModal" tabindex="-1" v-if="lessonFormVisible">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ lessonFormMode === 'add' ? '새 차시 추가' : '차시 수정' }}</h5>
                    <button type="button" class="btn-close" @click="cancelLessonForm"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-8">
                            <label class="form-label">차시명 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" v-model="lessonForm.title" placeholder="예) React Hooks 완벽 가이드">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">소요시간 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" v-model="lessonForm.duration" placeholder="예) 25분">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">콘텐츠 타입</label>
                            <select class="form-select" v-model="lessonForm.type">
                                <option value="video">동영상</option>
                                <option value="document">문서</option>
                                <option value="quiz">퀴즈</option>
                                <option value="assignment">과제</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">공개 여부</label>
                            <select class="form-select" v-model="lessonForm.isPublic">
                                <option value="true">공개</option>
                                <option value="false">비공개</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" v-model="lessonForm.isFree" id="lessonIsFree">
                                <label class="form-check-label" for="lessonIsFree">
                                    무료 미리보기 허용
                                </label>
                            </div>
                        </div>
                        <div class="col-12">
                            <label class="form-label">설명</label>
                            <textarea class="form-control" rows="2" v-model="lessonForm.description" placeholder="차시에 대한 간단한 설명"></textarea>
                        </div>

                        <!-- 콘텐츠 연동 섹션 -->
                        <div class="col-12">
                            <hr>
                            <h6 class="mb-3">콘텐츠 연동</h6>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">연동 타입</label>
                            <select class="form-select" v-model="lessonForm.contentType">
                                <option :value="null">연동 안함 (외부 URL 사용)</option>
                                <option value="content">콘텐츠</option>
                                <option value="exam">시험</option>
                                <option value="assignment">과제</option>
                            </select>
                        </div>
                        <div class="col-md-6" v-if="lessonForm.contentType === 'content'">
                            <label class="form-label">콘텐츠 선택</label>
                            <select class="form-select" v-model="lessonForm.contentId">
                                <option :value="null">선택하세요</option>
                                <option v-for="content in availableContents" :key="content.id" :value="content.id">
                                    {{ content.title }} ({{ content.type }}, {{ content.duration }})
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6" v-if="lessonForm.contentType === 'exam'">
                            <label class="form-label">시험 선택</label>
                            <select class="form-select" v-model="lessonForm.contentId">
                                <option :value="null">선택하세요</option>
                                <option v-for="exam in availableExams" :key="exam.id" :value="exam.id">
                                    {{ exam.title }} ({{ exam.questionCount }}문항, {{ exam.timeLimit }})
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6" v-if="lessonForm.contentType === 'assignment'">
                            <label class="form-label">과제 선택</label>
                            <select class="form-select" v-model="lessonForm.contentId">
                                <option :value="null">선택하세요</option>
                                <option v-for="assignment in availableAssignments" :key="assignment.id" :value="assignment.id">
                                    {{ assignment.title }} ({{ assignment.dueDate }}, {{ assignment.points }}점)
                                </option>
                            </select>
                        </div>
                        <div class="col-12" v-if="!lessonForm.contentType">
                            <label class="form-label">외부 콘텐츠 URL</label>
                            <input type="text" class="form-control" v-model="lessonForm.contentUrl" placeholder="동영상 또는 문서 URL">
                            <div class="form-text">콘텐츠를 연동하지 않는 경우 외부 URL을 입력하세요.</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" @click="cancelLessonForm">취소</button>
                    <button type="button" class="btn btn-primary" @click="saveLessonForm">
                        {{ lessonFormMode === 'add' ? '추가' : '수정' }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
