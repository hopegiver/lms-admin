<div class="certificates-page">
    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">ìˆ˜ë£Œì¦ í…œí”Œë¦¿</h4>
            <p class="text-muted mb-0">ìˆ˜ë£Œì¦ í…œí”Œë¦¿ì„ ê´€ë¦¬í•˜ê³  ê°•ì¢Œì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
        </div>
        <button class="btn btn-primary" @click="createTemplate">
            <span class="me-1">â•</span> ìƒˆ í…œí”Œë¦¿ ë§Œë“¤ê¸°
        </button>
    </div>

    <!-- í†µê³„ ì¹´ë“œ -->
    <div class="row g-3 mb-4">
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">ì „ì²´ í…œí”Œë¦¿</div>
                            <div class="fs-4 fw-bold">{{ templates.length }}</div>
                        </div>
                        <div class="rounded-circle bg-primary bg-opacity-10 p-3">
                            <span class="fs-4">ğŸ“</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">ì‚¬ìš© ì¤‘</div>
                            <div class="fs-4 fw-bold text-success">{{ templates.filter(t => t.usageCount > 0).length }}</div>
                        </div>
                        <div class="rounded-circle bg-success bg-opacity-10 p-3">
                            <span class="fs-4">âœ…</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">ê°€ë¡œí˜•</div>
                            <div class="fs-4 fw-bold">{{ templates.filter(t => t.orientation === 'horizontal').length }}</div>
                        </div>
                        <div class="rounded-circle bg-info bg-opacity-10 p-3">
                            <span class="fs-4">ğŸ“„</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">ì„¸ë¡œí˜•</div>
                            <div class="fs-4 fw-bold">{{ templates.filter(t => t.orientation === 'vertical').length }}</div>
                        </div>
                        <div class="rounded-circle bg-warning bg-opacity-10 p-3">
                            <span class="fs-4">ğŸ“ƒ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í•„í„° & ê²€ìƒ‰ -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
            <div class="row g-3 align-items-center">
                <div class="col-md-6">
                    <div class="input-group">
                        <span class="input-group-text bg-white">ğŸ”</span>
                        <input type="text" class="form-control" placeholder="í…œí”Œë¦¿ëª… ë˜ëŠ” ì„¤ëª… ê²€ìƒ‰..." v-model="searchQuery">
                    </div>
                </div>
                <div class="col-md-3">
                    <select class="form-select" v-model="sortBy">
                        <option value="newest">ìµœì‹ ìˆœ</option>
                        <option value="oldest">ì˜¤ë˜ëœìˆœ</option>
                        <option value="name">ì´ë¦„ìˆœ</option>
                        <option value="usage">ì‚¬ìš©ìˆœ</option>
                    </select>
                </div>
                <div class="col-md-3 text-end">
                    <button class="btn btn-outline-secondary" @click="resetFilters">ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>
    </div>

    <!-- í…œí”Œë¦¿ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
    <div class="row g-4 mb-4">
        <div class="col-md-6 col-lg-4 col-xl-3" v-for="template in filteredTemplates" :key="template.id">
            <div class="card border-0 shadow-sm h-100" style="cursor: pointer;" @click="viewTemplate(template)">
                <div class="position-absolute top-0 end-0 m-2">
                    <div class="dropdown">
                        <button class="btn btn-sm btn-light rounded-circle" type="button" data-bs-toggle="dropdown" @click.stop>
                            â‹®
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" @click.stop="viewTemplate(template)">ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°</a></li>
                            <li><a class="dropdown-item" href="#" @click.stop="editTemplate(template)">âœï¸ ìˆ˜ì •</a></li>
                            <li><a class="dropdown-item" href="#" @click.stop="duplicateTemplate(template)">ğŸ“‹ ë³µì œ</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#"
                                   @click.stop="deleteTemplate(template)"
                                   :class="{ disabled: template.usageCount > 0 }">ğŸ—‘ï¸ ì‚­ì œ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="card-body">
                    <!-- í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
                    <div class="bg-light rounded d-flex align-items-center justify-content-center mb-3 position-relative"
                         :class="template.orientation === 'horizontal' ? 'ratio ratio-4x3' : 'ratio ratio-3x4'"
                         :style="template.backgroundImage ? `background-image: url(${template.backgroundImage}); background-size: cover; background-position: center;` : ''">
                        <div v-if="!template.backgroundImage" class="text-center">
                            <span style="font-size: 3rem;">ğŸ“</span>
                            <div class="small text-muted mt-2">{{ getOrientationText(template.orientation) }}</div>
                        </div>
                        <div v-else class="position-absolute top-0 start-0 m-2">
                            <span class="badge bg-dark bg-opacity-75">{{ getOrientationText(template.orientation) }}</span>
                        </div>
                    </div>

                    <h6 class="card-title fw-bold mb-2">{{ template.name }}</h6>
                    <p class="text-muted small mb-3" style="min-height: 40px;">{{ template.description }}</p>

                    <div class="mb-3">
                        <span class="badge bg-light text-dark me-1">{{ template.size }}</span>
                        <span class="badge bg-light text-dark me-1">{{ template.fields.length }}ê°œ í•„ë“œ</span>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-muted small">ğŸ’¼ {{ template.usageCount }}ê°œ ê°•ì¢Œ</span>
                        <span class="text-muted small">ğŸ•’ {{ template.updatedAt }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¹ˆ ìƒíƒœ -->
    <div v-if="filteredTemplates.length === 0" class="card border-0 shadow-sm">
        <div class="card-body text-center py-5">
            <div class="mb-3" style="font-size: 4rem; opacity: 0.3;">ğŸ“</div>
            <h5 class="text-muted mb-3">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
            <p class="text-muted mb-4">ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ì‹œë„í•´ë³´ì„¸ìš”</p>
            <button class="btn btn-outline-secondary" @click="resetFilters">í•„í„° ì´ˆê¸°í™”</button>
        </div>
    </div>
</div>
