<div class="content-page">
    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">ì½˜í…ì¸ </h4>
            <p class="text-muted mb-0">ë¯¸ë””ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
        </div>
        <button class="btn btn-primary" @click="openUploadModal">
            <span class="me-1">ğŸ“¤</span> ì—…ë¡œë“œ
        </button>
    </div>

    <!-- í†µê³„ -->
    <div class="row g-3 mb-4">
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body d-flex align-items-center">
                    <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3">
                        <span class="fs-4">ğŸ¬</span>
                    </div>
                    <div>
                        <div class="fs-5 fw-bold">{{ stats.videos }}</div>
                        <div class="text-muted small">ë™ì˜ìƒ</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body d-flex align-items-center">
                    <div class="rounded-circle bg-success bg-opacity-10 p-3 me-3">
                        <span class="fs-4">ğŸ“„</span>
                    </div>
                    <div>
                        <div class="fs-5 fw-bold">{{ stats.documents }}</div>
                        <div class="text-muted small">ë¬¸ì„œ</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body d-flex align-items-center">
                    <div class="rounded-circle bg-warning bg-opacity-10 p-3 me-3">
                        <span class="fs-4">ğŸ–¼ï¸</span>
                    </div>
                    <div>
                        <div class="fs-5 fw-bold">{{ stats.images }}</div>
                        <div class="text-muted small">ì´ë¯¸ì§€</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body d-flex align-items-center">
                    <div class="rounded-circle bg-info bg-opacity-10 p-3 me-3">
                        <span class="fs-4">ğŸ’¾</span>
                    </div>
                    <div>
                        <div class="fs-5 fw-bold">{{ stats.totalSize }}</div>
                        <div class="text-muted small">ì „ì²´ ìš©ëŸ‰</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í•„í„° & ê²€ìƒ‰ -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
            <div class="row g-3 align-items-center">
                <div class="col-md-2">
                    <select class="form-select" v-model="filters.type">
                        <option value="">ì „ì²´ ìœ í˜•</option>
                        <option value="video">ë™ì˜ìƒ</option>
                        <option value="document">ë¬¸ì„œ</option>
                        <option value="image">ì´ë¯¸ì§€</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select class="form-select" v-model="filters.course">
                        <option value="">ì „ì²´ ê°•ì¢Œ</option>
                        <option v-for="c in courseList" :key="c">{{ c }}</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-text bg-white">ğŸ”</span>
                        <input type="text" class="form-control" placeholder="íŒŒì¼ëª… ê²€ìƒ‰..." v-model="searchQuery">
                    </div>
                </div>
                <div class="col-md-2">
                    <select class="form-select" v-model="sortBy">
                        <option value="date">ìµœì‹ ìˆœ</option>
                        <option value="name">ì´ë¦„ìˆœ</option>
                        <option value="size">í¬ê¸°ìˆœ</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <div class="btn-group w-100">
                        <button class="btn" :class="viewMode === 'grid' ? 'btn-primary' : 'btn-outline-secondary'" @click="viewMode = 'grid'">
                            â–¦
                        </button>
                        <button class="btn" :class="viewMode === 'list' ? 'btn-primary' : 'btn-outline-secondary'" @click="viewMode = 'list'">
                            â˜°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ê·¸ë¦¬ë“œ ë·° -->
    <div class="row g-3" v-if="viewMode === 'grid'">
        <div class="col-6 col-md-4 col-lg-3 col-xl-2" v-for="file in files" :key="file.id">
            <div class="card border-0 shadow-sm h-100 content-card" @click="selectFile(file)">
                <div class="card-body p-2">
                    <div class="content-thumbnail rounded mb-2 d-flex align-items-center justify-content-center"
                         :class="getThumbnailClass(file.type)">
                        <span class="fs-1">{{ getFileIcon(file.type) }}</span>
                    </div>
                    <div class="small fw-medium text-truncate" :title="file.name" @click="viewDetail(file)" style="cursor: pointer;">{{ file.name }}</div>
                    <div class="small text-muted">{{ file.size }}</div>
                </div>
                <div class="card-footer bg-transparent border-0 p-2 pt-0">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge bg-light text-dark small">{{ file.course || 'ë¯¸ë°°ì •' }}</span>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-link text-muted p-0" data-bs-toggle="dropdown" @click.stop>â‹®</button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" @click.stop="previewFile(file)">ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°</a></li>
                                <li><a class="dropdown-item" href="#" @click.stop="downloadFile(file)">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</a></li>
                                <li><a class="dropdown-item" href="#" @click.stop="editFile(file)">âœï¸ ì •ë³´ ìˆ˜ì •</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item text-danger" href="#" @click.stop="deleteFile(file)">ğŸ—‘ï¸ ì‚­ì œ</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¦¬ìŠ¤íŠ¸ ë·° -->
    <div class="card border-0 shadow-sm" v-if="viewMode === 'list'">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th><input type="checkbox" class="form-check-input"></th>
                            <th>íŒŒì¼ëª…</th>
                            <th>ìœ í˜•</th>
                            <th>ê°•ì¢Œ</th>
                            <th class="text-end">í¬ê¸°</th>
                            <th>ì—…ë¡œë“œì¼</th>
                            <th style="width: 100px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="file in files" :key="file.id">
                            <td><input type="checkbox" class="form-check-input"></td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <span class="fs-4 me-2">{{ getFileIcon(file.type) }}</span>
                                    <span class="fw-medium" @click="viewDetail(file)" style="cursor: pointer;">{{ file.name }}</span>
                                </div>
                            </td>
                            <td><span class="badge bg-light text-dark">{{ getFileTypeText(file.type) }}</span></td>
                            <td>{{ file.course || '-' }}</td>
                            <td class="text-end">{{ file.size }}</td>
                            <td>{{ file.uploadDate }}</td>
                            <td>
                                <div class="dropdown">
                                    <button class="btn btn-link text-muted p-0" data-bs-toggle="dropdown">â‹®</button>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="#" @click="previewFile(file)">ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°</a></li>
                                        <li><a class="dropdown-item" href="#" @click="downloadFile(file)">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</a></li>
                                        <li><a class="dropdown-item" href="#" @click="editFile(file)">âœï¸ ì •ë³´ ìˆ˜ì •</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item text-danger" href="#" @click="deleteFile(file)">ğŸ—‘ï¸ ì‚­ì œ</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="d-flex justify-content-center mt-4">
        <nav>
            <ul class="pagination">
                <li class="page-item disabled"><a class="page-link" href="#">ì´ì „</a></li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">ë‹¤ìŒ</a></li>
            </ul>
        </nav>
    </div>
</div>

<style>
.content-card {
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
.content-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
}
.content-thumbnail {
    height: 100px;
}
.content-thumbnail.video { background-color: #e3f2fd; }
.content-thumbnail.document { background-color: #e8f5e9; }
.content-thumbnail.image { background-color: #fff3e0; }
</style>
