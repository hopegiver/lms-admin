<div class="webinar-sessions">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">ì„¸ì…˜ ì´ë ¥</h4>
            <p class="text-muted mb-0">ì™„ë£Œëœ í™”ìƒê°•ì˜ ì„¸ì…˜ ê¸°ë¡ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
        </div>
        <button class="btn btn-outline-primary" @click="exportData">
            <span class="me-1">ğŸ“Š</span> ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        </button>
    </div>

    <!-- í†µê³„ ì¹´ë“œ -->
    <div class="row g-3 mb-4">
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="text-muted small mb-1">ì „ì²´ ì„¸ì…˜</div>
                    <div class="fs-3 fw-bold">{{ statistics.total }}</div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="text-muted small mb-1">ì¶œì„</div>
                    <div class="fs-3 fw-bold text-success">{{ statistics.attended }}</div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="text-muted small mb-1">ëˆ„ì  ì‹œê°„</div>
                    <div class="fs-3 fw-bold text-primary">{{ statistics.totalHours }}h</div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="text-muted small mb-1">í‰ê·  í‰ì </div>
                    <div class="fs-3 fw-bold text-warning">{{ statistics.avgRating }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- í•„í„° ë° ê²€ìƒ‰ -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <label class="form-label small">ê¸°ê°„</label>
                    <select class="form-select" v-model="filterPeriod">
                        <option value="7days">ìµœê·¼ 7ì¼</option>
                        <option value="30days">ìµœê·¼ 30ì¼</option>
                        <option value="90days">ìµœê·¼ 90ì¼</option>
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label small">ê°•ì‚¬</label>
                    <select class="form-select" v-model="filterInstructor">
                        <option value="all">ì „ì²´</option>
                        <option v-for="instructor in instructors" :key="instructor.id" :value="instructor.id">
                            {{ instructor.name }}
                        </option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label small">ê²€ìƒ‰</label>
                    <input
                        type="text"
                        class="form-control"
                        v-model="searchKeyword"
                        placeholder="í•™ìƒëª…, ê°•ì‚¬ëª…, ê°•ì¢Œëª…ìœ¼ë¡œ ê²€ìƒ‰..."
                    >
                </div>
            </div>
        </div>
    </div>

    <!-- ì„¸ì…˜ ëª©ë¡ -->
    <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
            <div v-if="filteredSessions.length === 0" class="text-center text-muted py-5">
                <div class="fs-1 mb-3">ğŸ“­</div>
                <div>ì„¸ì…˜ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>
            </div>
            <div v-else class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>ì„¸ì…˜ ID</th>
                            <th>í•™ìƒ</th>
                            <th>ê°•ì‚¬</th>
                            <th>ê°•ì¢Œ</th>
                            <th>ì¼ì‹œ</th>
                            <th>ì†Œìš”ì‹œê°„</th>
                            <th>ì¶œì„</th>
                            <th>í‰ì </th>
                            <th>ë…¹í™”</th>
                            <th>ì‘ì—…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="session in filteredSessions" :key="session.id">
                            <td class="fw-bold">#{{ session.id }}</td>
                            <td>{{ session.studentName }}</td>
                            <td>{{ session.instructorName }}</td>
                            <td>{{ session.courseTitle }}</td>
                            <td>
                                <div>{{ formatDate(session.startTime) }}</div>
                                <div class="small text-muted">{{ formatTime(session.startTime) }}</div>
                            </td>
                            <td>{{ session.actualDuration }}ë¶„</td>
                            <td>
                                <span class="badge" :class="getAttendanceBadge(session.attendanceStatus).class">
                                    {{ getAttendanceBadge(session.attendanceStatus).text }}
                                </span>
                            </td>
                            <td>
                                <span v-if="session.rating">{{ getRatingStars(session.rating) }}</span>
                                <span v-else class="text-muted">-</span>
                            </td>
                            <td>
                                <button
                                    v-if="session.recordingUrl"
                                    class="btn btn-sm btn-outline-primary"
                                    @click="downloadRecording(session.recordingUrl)"
                                >
                                    <span>ğŸ“¹</span>
                                </button>
                                <span v-else class="text-muted">-</span>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" @click="viewDetail(session)">
                                    ìƒì„¸
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ì„¸ì…˜ ìƒì„¸ ëª¨ë‹¬ -->
    <div v-if="showDetailModal && selectedSession" class="modal d-block" tabindex="-1" style="background: rgba(0,0,0,0.5);">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ì„¸ì…˜ ìƒì„¸ #{{ selectedSession.id }}</h5>
                    <button type="button" class="btn-close" @click="showDetailModal = false"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label text-muted small">ì˜ˆì•½ ID</label>
                                <div class="fw-bold">#{{ selectedSession.reservationId }}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">í•™ìƒ</label>
                                <div class="fw-bold">{{ selectedSession.studentName }}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">ê°•ì‚¬</label>
                                <div class="fw-bold">{{ selectedSession.instructorName }}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">ê°•ì¢Œ</label>
                                <div class="fw-bold">{{ selectedSession.courseTitle }}</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label text-muted small">ì‹œì‘ ì‹œê°„</label>
                                <div class="fw-bold">{{ formatDateTime(selectedSession.startTime) }}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">ì¢…ë£Œ ì‹œê°„</label>
                                <div class="fw-bold">{{ formatDateTime(selectedSession.endTime) }}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">ì†Œìš” ì‹œê°„</label>
                                <div>
                                    <span class="fw-bold">{{ selectedSession.actualDuration }}ë¶„</span>
                                    <span class="text-muted ms-2">(ì˜ˆì •: {{ selectedSession.duration }}ë¶„)</span>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label text-muted small">ì¶œì„ ìƒíƒœ</label>
                                <div>
                                    <span class="badge fs-6" :class="getAttendanceBadge(selectedSession.attendanceStatus).class">
                                        {{ getAttendanceBadge(selectedSession.attendanceStatus).text }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12" v-if="selectedSession.recordingUrl">
                            <div class="mb-3">
                                <label class="form-label text-muted small">ë…¹í™” ì˜ìƒ</label>
                                <div>
                                    <button class="btn btn-primary" @click="downloadRecording(selectedSession.recordingUrl)">
                                        <span class="me-1">ğŸ“¹</span> ë…¹í™” ì˜ìƒ ë³´ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-12" v-if="selectedSession.notes">
                            <div class="mb-3">
                                <label class="form-label text-muted small">ê°•ì‚¬ ë…¸íŠ¸</label>
                                <div class="border rounded p-3 bg-light">{{ selectedSession.notes }}</div>
                            </div>
                        </div>
                        <div class="col-12" v-if="selectedSession.rating">
                            <div class="mb-3">
                                <label class="form-label text-muted small">í•™ìƒ í‰ê°€</label>
                                <div class="mb-2">
                                    <span class="fs-4">{{ getRatingStars(selectedSession.rating) }}</span>
                                    <span class="text-muted ms-2">({{ selectedSession.rating }}/5)</span>
                                </div>
                                <div v-if="selectedSession.feedback" class="border rounded p-3 bg-light">
                                    {{ selectedSession.feedback }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" @click="showDetailModal = false">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
    </div>
</div>
