<div class="assessments-page">
    <!-- ÌéòÏù¥ÏßÄ Ìó§Îçî -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">ÌèâÍ∞Ä</h4>
            <p class="text-muted mb-0">ÏãúÌóò, Í≥ºÏ†ú, Î¨∏Ï†úÏùÄÌñâÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§</p>
        </div>
        <button class="btn btn-primary" @click="openCreateModal">
            <span class="me-1">‚ûï</span> ÏÉàÎ°ú ÎßåÎì§Í∏∞
        </button>
    </div>

    <!-- ÌÉ≠ Î©îÎâ¥ -->
    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'exams' }" href="#" @click.prevent="activeTab = 'exams'">
                üìù ÏãúÌóò
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'assignments' }" href="#" @click.prevent="activeTab = 'assignments'">
                ‚úçÔ∏è Í≥ºÏ†ú
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: activeTab === 'questionbank' }" href="#" @click.prevent="activeTab = 'questionbank'">
                üóÉÔ∏è Î¨∏Ï†úÏùÄÌñâ
            </a>
        </li>
    </ul>

    <!-- ÏãúÌóò ÌÉ≠ -->
    <div v-if="activeTab === 'exams'">
        <div class="card border-0 shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>ÏãúÌóòÎ™Ö</th>
                                <th>Í∞ïÏ¢å</th>
                                <th class="text-center">Î¨∏Ìï≠ Ïàò</th>
                                <th class="text-center">ÏãúÍ∞Ñ Ï†úÌïú</th>
                                <th class="text-center">ÏùëÏãúÏûê</th>
                                <th class="text-center">ÌèâÍ∑† Ï†êÏàò</th>
                                <th class="text-center">ÏÉÅÌÉú</th>
                                <th style="width: 100px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="exam in exams" :key="exam.id">
                                <td>
                                    <div class="fw-medium">{{ exam.title }}</div>
                                    <small class="text-muted">{{ exam.type }}</small>
                                </td>
                                <td>{{ exam.course }}</td>
                                <td class="text-center">{{ exam.questions }}Î¨∏Ìï≠</td>
                                <td class="text-center">{{ exam.timeLimit }}</td>
                                <td class="text-center">{{ exam.submissions }}Î™Ö</td>
                                <td class="text-center">{{ exam.avgScore }}Ï†ê</td>
                                <td class="text-center">
                                    <span class="badge" :class="exam.active ? 'bg-success' : 'bg-secondary'">
                                        {{ exam.active ? 'ÌôúÏÑ±' : 'ÎπÑÌôúÏÑ±' }}
                                    </span>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-link text-muted p-0" data-bs-toggle="dropdown">‚ãÆ</button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#" @click="editExam(exam)">‚úèÔ∏è ÏàòÏ†ï</a></li>
                                            <li><a class="dropdown-item" href="#" @click="viewResults(exam)">üìä Í≤∞Í≥º Î≥¥Í∏∞</a></li>
                                            <li><a class="dropdown-item" href="#" @click="duplicateExam(exam)">üìë Î≥µÏÇ¨</a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-danger" href="#" @click="deleteExam(exam)">üóëÔ∏è ÏÇ≠Ï†ú</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Í≥ºÏ†ú ÌÉ≠ -->
    <div v-if="activeTab === 'assignments'">
        <div class="card border-0 shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Í≥ºÏ†úÎ™Ö</th>
                                <th>Í∞ïÏ¢å</th>
                                <th>ÎßàÍ∞êÏùº</th>
                                <th class="text-center">Ï†úÏ∂ú</th>
                                <th class="text-center">Ï±ÑÏ†ê ÎåÄÍ∏∞</th>
                                <th class="text-center">ÏÉÅÌÉú</th>
                                <th style="width: 100px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="assignment in assignments" :key="assignment.id">
                                <td>
                                    <div class="fw-medium">{{ assignment.title }}</div>
                                </td>
                                <td>{{ assignment.course }}</td>
                                <td>{{ assignment.dueDate }}</td>
                                <td class="text-center">{{ assignment.submitted }}/{{ assignment.total }}</td>
                                <td class="text-center">
                                    <span class="badge bg-warning text-dark" v-if="assignment.pendingGrade > 0">
                                        {{ assignment.pendingGrade }}
                                    </span>
                                    <span v-else>-</span>
                                </td>
                                <td class="text-center">
                                    <span class="badge" :class="getAssignmentStatusClass(assignment.status)">
                                        {{ assignment.status }}
                                    </span>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-link text-muted p-0" data-bs-toggle="dropdown">‚ãÆ</button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#" @click="editAssignment(assignment)">‚úèÔ∏è ÏàòÏ†ï</a></li>
                                            <li><a class="dropdown-item" href="#" @click="gradeAssignment(assignment)">üìã Ï±ÑÏ†êÌïòÍ∏∞</a></li>
                                            <li><a class="dropdown-item" href="#" @click="viewSubmissions(assignment)">üì• Ï†úÏ∂úÎ¨º Î≥¥Í∏∞</a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-danger" href="#" @click="deleteAssignment(assignment)">üóëÔ∏è ÏÇ≠Ï†ú</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Î¨∏Ï†úÏùÄÌñâ ÌÉ≠ -->
    <div v-if="activeTab === 'questionbank'">
        <div class="row g-3 mb-4">
            <div class="col-md-4">
                <select class="form-select" v-model="questionFilters.category">
                    <option value="">Ï†ÑÏ≤¥ Ïπ¥ÌÖåÍ≥†Î¶¨</option>
                    <option v-for="cat in questionCategories" :key="cat">{{ cat }}</option>
                </select>
            </div>
            <div class="col-md-4">
                <select class="form-select" v-model="questionFilters.type">
                    <option value="">Ï†ÑÏ≤¥ Ïú†Ìòï</option>
                    <option value="multiple">Í∞ùÍ¥ÄÏãù</option>
                    <option value="short">Îã®ÎãµÌòï</option>
                    <option value="essay">ÏÑúÏà†Ìòï</option>
                    <option value="truefalse">O/X</option>
                </select>
            </div>
            <div class="col-md-4">
                <input type="text" class="form-control" placeholder="Î¨∏Ï†ú Í≤ÄÏÉâ..." v-model="questionSearch">
            </div>
        </div>

        <div class="card border-0 shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th><input type="checkbox" class="form-check-input"></th>
                                <th>Î¨∏Ï†ú</th>
                                <th>Ïπ¥ÌÖåÍ≥†Î¶¨</th>
                                <th class="text-center">Ïú†Ìòï</th>
                                <th class="text-center">ÎÇúÏù¥ÎèÑ</th>
                                <th class="text-center">ÏÇ¨Ïö© ÌöüÏàò</th>
                                <th style="width: 100px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="q in questions" :key="q.id">
                                <td><input type="checkbox" class="form-check-input"></td>
                                <td>
                                    <div class="fw-medium text-truncate" style="max-width: 300px;">{{ q.question }}</div>
                                </td>
                                <td><span class="badge bg-light text-dark">{{ q.category }}</span></td>
                                <td class="text-center">{{ getQuestionTypeText(q.type) }}</td>
                                <td class="text-center">
                                    <span class="badge" :class="getDifficultyClass(q.difficulty)">
                                        {{ getDifficultyText(q.difficulty) }}
                                    </span>
                                </td>
                                <td class="text-center">{{ q.usageCount }}Ìöå</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-link text-muted p-0" data-bs-toggle="dropdown">‚ãÆ</button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#" @click="editQuestion(q)">‚úèÔ∏è ÏàòÏ†ï</a></li>
                                            <li><a class="dropdown-item" href="#" @click="previewQuestion(q)">üëÅÔ∏è ÎØ∏Î¶¨Î≥¥Í∏∞</a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-danger" href="#" @click="deleteQuestion(q)">üóëÔ∏è ÏÇ≠Ï†ú</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
