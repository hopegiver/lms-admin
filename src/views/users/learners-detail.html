<div class="learners-detail-page">
    <!-- ÌéòÏù¥ÏßÄ Ìó§Îçî -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <div class="d-flex align-items-center gap-2 mb-2">
                <a href="#" @click.prevent="navigateTo('/users/learners')" class="text-muted">
                    ‚Üê ÌïôÏäµÏûê Î™©Î°ù
                </a>
            </div>
            <h4 class="mb-1">{{ learner?.name }}</h4>
            <p class="text-muted mb-0">ÌïôÏäµÏûê ÏÉÅÏÑ∏ Ï†ïÎ≥¥</p>
        </div>
        <div class="d-flex gap-2">
            <button class="btn btn-outline-secondary" @click="edit">
                ‚úèÔ∏è ÏàòÏ†ï
            </button>
            <button class="btn btn-outline-danger" @click="deleteLearner">
                üóëÔ∏è ÏÇ≠Ï†ú
            </button>
        </div>
    </div>

    <!-- ÌÉ≠ Î©îÎâ¥ -->
    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'info' }" href="#" @click.prevent="currentTab = 'info'">Í∏∞Î≥∏Ï†ïÎ≥¥</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'learning' }" href="#" @click.prevent="currentTab = 'learning'">ÌïôÏäµÏù¥Î†•</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'purchase' }" href="#" @click.prevent="currentTab = 'purchase'">Íµ¨Îß§Ïù¥Î†•</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentTab === 'activity' }" href="#" @click.prevent="currentTab = 'activity'">ÌôúÎèô Î°úÍ∑∏</a>
        </li>
    </ul>

    <!-- Í∏∞Î≥∏Ï†ïÎ≥¥ ÌÉ≠ -->
    <div v-if="currentTab === 'info' && learner">
        <div class="row">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0">Í∏∞Î≥∏ Ï†ïÎ≥¥</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Ïù¥Î¶Ñ</label>
                                <div class="fw-medium">{{ learner.name }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Ïù¥Î©îÏùº</label>
                                <div class="fw-medium">{{ learner.email }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Ïó∞ÎùΩÏ≤ò</label>
                                <div class="fw-medium">{{ learner.phone || '-' }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Ï°∞ÏßÅ</label>
                                <div class="fw-medium">{{ learner.organization || '-' }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">Í∞ÄÏûÖÏùº</label>
                                <div class="fw-medium">{{ learner.createdAt }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">ÏÉÅÌÉú</label>
                                <div>
                                    <span class="badge" :class="getStatusClass(learner.status)">
                                        {{ getStatusText(learner.status) }}
                                    </span>
                                </div>
                            </div>
                            <div class="col-12" v-if="learner.memo">
                                <label class="form-label text-muted small">Î©îÎ™®</label>
                                <div class="fw-medium">{{ learner.memo }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0">Ï∂îÍ∞Ä Ï†ïÎ≥¥</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted small">ÏÉùÎÖÑÏõîÏùº</label>
                                <div class="fw-medium">{{ learner.birthdate || '-' }}</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted small">ÏÑ±Î≥Ñ</label>
                                <div class="fw-medium">{{ getGenderText(learner.gender) }}</div>
                            </div>
                            <div class="col-12">
                                <label class="form-label text-muted small">Ï£ºÏÜå</label>
                                <div class="fw-medium">{{ learner.address || '-' }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÌÜµÍ≥Ñ ÏÇ¨Ïù¥ÎìúÎ∞î -->
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm mb-3">
                    <div class="card-body">
                        <h6 class="mb-3">ÌïôÏäµ ÌÜµÍ≥Ñ</h6>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <span class="small text-muted">ÏàòÍ∞ïÏ§ëÏù∏ Í∞ïÏ¢å</span>
                                <span class="fw-bold">{{ learner.enrolledCourses }}Í∞ú</span>
                            </div>
                            <div class="d-flex justify-content-between mb-1">
                                <span class="small text-muted">ÏôÑÎ£åÌïú Í∞ïÏ¢å</span>
                                <span class="fw-bold">{{ completedCourses }}Í∞ú</span>
                            </div>
                            <div class="d-flex justify-content-between mb-1">
                                <span class="small text-muted">ÌèâÍ∑† ÏßÑÎèÑÏú®</span>
                                <span class="fw-bold">{{ avgProgress }}%</span>
                            </div>
                        </div>
                        <hr>
                        <div>
                            <div class="d-flex justify-content-between mb-1">
                                <span class="small text-muted">Ï¥ù ÌïôÏäµ ÏãúÍ∞Ñ</span>
                                <span class="fw-bold">45ÏãúÍ∞Ñ</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span class="small text-muted">ÏµúÍ∑º Ï†ëÏÜç</span>
                                <span class="fw-bold">2024-12-30</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÌïôÏäµÏù¥Î†• ÌÉ≠ -->
    <div v-if="currentTab === 'learning' && learner">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Í∞ïÏ¢åÎ™Ö</th>
                                <th class="text-center">ÏßÑÎèÑÏú®</th>
                                <th>ÏãúÏûëÏùº</th>
                                <th>ÏôÑÎ£åÏùº</th>
                                <th class="text-center">ÏÉÅÌÉú</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="course in learner.courses" :key="course.id">
                                <td>
                                    <div class="fw-medium">{{ course.title }}</div>
                                </td>
                                <td class="text-center">
                                    <div class="progress" style="height: 8px; width: 100px; margin: 0 auto;">
                                        <div class="progress-bar" :style="{ width: course.progress + '%' }"></div>
                                    </div>
                                    <small class="text-muted">{{ course.progress }}%</small>
                                </td>
                                <td>{{ course.startDate || '-' }}</td>
                                <td>{{ course.completionDate || '-' }}</td>
                                <td class="text-center">
                                    <span class="badge" :class="course.progress === 100 ? 'bg-success' : 'bg-primary'">
                                        {{ course.progress === 100 ? 'ÏôÑÎ£å' : 'ÏßÑÌñâÏ§ë' }}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Íµ¨Îß§Ïù¥Î†• ÌÉ≠ -->
    <div v-if="currentTab === 'purchase' && learner">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Ï£ºÎ¨∏Î≤àÌò∏</th>
                                <th>ÏÉÅÌíàÎ™Ö</th>
                                <th class="text-end">Í∏àÏï°</th>
                                <th>Í≤∞Ï†úÏùº</th>
                                <th class="text-center">ÏÉÅÌÉú</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="order in learner.orders" :key="order.id">
                                <td><span class="badge bg-light text-dark">#{{ order.id }}</span></td>
                                <td>{{ order.product }}</td>
                                <td class="text-end fw-medium">{{ order.amount }}</td>
                                <td>{{ order.date }}</td>
                                <td class="text-center">
                                    <span class="badge bg-success">{{ order.status }}</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ÌôúÎèô Î°úÍ∑∏ ÌÉ≠ -->
    <div v-if="currentTab === 'activity'">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="timeline">
                    <div class="timeline-item mb-3" v-for="(log, index) in activityLogs" :key="index">
                        <div class="d-flex gap-3">
                            <div class="text-muted small" style="min-width: 120px;">{{ log.date }}</div>
                            <div class="flex-grow-1">
                                <div class="fw-medium">{{ log.action }}</div>
                                <small class="text-muted">{{ log.detail }}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
